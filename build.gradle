/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.6/userguide/building_java_projects.html
 */

plugins {
    id 'java'
    id "com.github.spacialcircumstances.gradle-cucumber-reporting" version "0.1.24"
}
cucumberReports {
    outputDir = file('build/reports/')
    buildId = '0'
    reports = files('build/cucumber-reports/cucumber.json')
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    implementation 'com.google.guava:guava:31.1-jre'
    implementation 'io.cucumber:cucumber-java:7.11.1'
    implementation 'io.cucumber:cucumber-testng:7.11.1'
    implementation 'com.microsoft.playwright:playwright:1.31.0'
    implementation 'org.slf4j:slf4j-api:2.0.6'
    implementation 'com.univocity:univocity-parsers:2.9.1'

    testCompileOnly 'org.projectlombok:lombok:1.18.26'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.26'

    testImplementation 'org.testng:testng:7.7.0'
    testImplementation 'org.slf4j:slf4j-simple:2.0.5'
}

test {
    useTestNG() {
        suites "testng.xml"
        testLogging.showStandardStreams = true
        //report generation delegated to TestNG library:
        useDefaultListeners = true
        outputDirectory = file("$project.buildDir/testngOutput")
    }
    //turn off Gradle's HTML report to avoid replacing the reports generated by TestNG library:
    reports.html.enabled(false)

    systemProperty 'platform', System.getProperty('platform')
}
